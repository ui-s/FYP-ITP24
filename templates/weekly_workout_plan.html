{% extends "layout.html" %}

{% block title %}Weekly Workout Plan{% endblock %}

{% block extra_css %}
<style>
    .chart-container {
        width: 100%;
        max-width: 600px;
        margin: 20px auto;
    }
</style>
{% endblock %}

{% block content %}
<h1 class="mt-5 text-center text-primary">Your Weekly Workout Plan</h1>

<div class="row">
    {% for day in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'] %}
        <div class="col-md-4 mb-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">{{ day }}</h5>
                    {% if workout_plan.get(day) %}
                        <p>{{ workout_plan[day]['type'] }}</p>
                        <a href="{{ url_for('workout', day=day.lower()) }}" class="btn btn-primary">
                            <i class="fas fa-dumbbell"></i> View Workout
                        </a>
                    {% else %}
                        <p>Rest Day</p>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>

<h2 class="mt-5 text-center">Workout Analytics</h2>

<div class="chart-container">
    <canvas id="muscleGroupChart"></canvas>
</div>

<div class="chart-container">
    <canvas id="workoutDurationChart"></canvas>
</div>

<div class="chart-container">
    <canvas id="totalRepsChart"></canvas>
</div>

<div class="chart-container">
    <canvas id="bmiChart"></canvas>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/workout_charts.js') }}"></script>
<script>
    // Pass the chart data to the createCharts function
    const chartData = /* {{ chart_data | tojson | safe }} */ {};
    createCharts(chartData);
</script>
{% endblock %}